{"version":3,"sources":["webpack://crystalheart-char-sheet-foundryvtt/./src/index.ts"],"names":["extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","TestActor","_super","apply","arguments","defineProperty","get","options","mergeObject","defaultOptions","classes","width","height","tabs","navSelector","contentSelector","initial","scrollY","enumerable","configurable","getData","data","shields","itemsByType","parry","forEach","shield","_createEditor","target","editorOptions","initialContent","toolbar","_getHeaderButtons","_this","buttons","canConfigure","game","user","isGM","actor","owner","editable","label","i18n","localize","class","icon","onclick","ev","_onConfigureEntity","concat","event","preventDefault","swade","SwadeEntityTweaks","render","Actor","Hooks","on","Actors","registerSheet","types","thisArg","_arguments","P","generator","body","f","y","t","g","_","sent","trys","ops","next","verb","Symbol","iterator","n","v","op","done","value","pop","length","push","e","step","__generator","_a","loadTemplates","Promise","resolve","reject","fulfilled","rejected","result","then","preloadHandlebarsTemplates"],"mappings":"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","file":"bundle.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport './index.scss';\n// @ts-ignore\nvar TestActor = /** @class */ (function (_super) {\n    __extends(TestActor, _super);\n    function TestActor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(TestActor, \"defaultOptions\", {\n        get: function () {\n            // @ts-ignore\n            var options = mergeObject(_super.defaultOptions, {\n                classes: ['swade', 'sheet', 'actor', 'character'],\n                width: 630,\n                height: 768,\n                tabs: [\n                    {\n                        navSelector: '.tabs',\n                        contentSelector: '.sheet-body',\n                        initial: 'summary',\n                    },\n                ],\n                scrollY: ['.skills .skills-list', '.quickaccess-list', '.inventory .inventory-categories'],\n            });\n            options['activeArcane'] = 'All';\n            return options;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TestActor.prototype.getData = function () {\n        var data = _super.prototype.getData.call(this);\n        var shields = data.itemsByType['shield'];\n        data.parry = 0;\n        if (shields) {\n            shields.forEach(function (shield) {\n                if (shield.data['equipped']) {\n                    data.parry += shield.data['parry'];\n                }\n            });\n        }\n        return data;\n    };\n    TestActor.prototype._createEditor = function (target, editorOptions, initialContent) {\n        // remove some controls to the editor as the space is lacking\n        if (target === 'data.advances.details') {\n            editorOptions.toolbar = 'styleselect bullist hr table removeFormat code save ';\n        }\n        _super.prototype._createEditor.call(this, target, editorOptions, initialContent);\n    };\n    Object.defineProperty(TestActor.prototype, \"template\", {\n        get: function () {\n            // Later you might want to return a different template\n            // based on user permissions.\n            return 'modules/crystalheart-char-sheet/templates/sheet.html';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TestActor.prototype._getHeaderButtons = function () {\n        var _this = this;\n        var buttons = _super.prototype._getHeaderButtons.call(this);\n        // Token Configuration\n        //@ts-ignore\n        var canConfigure = game.user.isGM || this.actor.owner;\n        //@ts-ignore\n        if (this.options.editable && canConfigure) {\n            buttons = [\n                {\n                    //@ts-ignore\n                    label: game.i18n.localize('SWADE.Tweaks'),\n                    class: 'configure-actor',\n                    icon: 'fas fa-dice',\n                    onclick: function (ev) { return _this._onConfigureEntity(ev); },\n                },\n            ].concat(buttons);\n        }\n        return buttons;\n    };\n    TestActor.prototype._onConfigureEntity = function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        new game.swade.SwadeEntityTweaks(this.actor).render(true);\n    };\n    return TestActor;\n}(Actor));\n//@ts-ignore\nHooks.on('init', function () {\n    //@ts-ignore\n    Actors.registerSheet('crystalheart-swade-sheet', TestActor, {\n        types: ['character'],\n        label: 'Crystal Heart Character Sheet',\n    });\n    //@ts-ignore\n    preloadHandlebarsTemplates();\n});\nfunction preloadHandlebarsTemplates() {\n    return __awaiter(this, void 0, void 0, function () {\n        var templatePaths;\n        return __generator(this, function (_a) {\n            templatePaths = ['modules/crystalheart-char-sheet/templates/sheet.html'];\n            //@ts-ignore\n            return [2 /*return*/, loadTemplates(templatePaths)];\n        });\n    });\n}\n"],"sourceRoot":""}